# –ì–∏–±—Ä–∏–¥–Ω–∞—è React + Vanilla JS –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

> **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**
> 
> –í–µ—Ä—Å–∏—è: 1.0  
> –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: August 2025

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–ª—é—á–µ–≤—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
3. [–î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–¥–∏–∞–≥—Ä–∞–º–º–∞-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
4. [–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è](#–ø–∞—Ç—Ç–µ—Ä–Ω—ã-–∏-—Ä–µ—à–µ–Ω–∏—è)
5. [Best Practices](#best-practices)
6. [–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ trade-offs](#–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã-–∏-trade-offs)

---

## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ü—Ä–æ–±–ª–µ–º–∞
–°–æ–∑–¥–∞–Ω–∏–µ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (drag-n-drop, real-time –∞–Ω–∏–º–∞—Ü–∏–∏) –≤ React –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑-–∑–∞ —á–∞—Å—Ç—ã—Ö re-renders –≤–æ –≤—Ä–µ–º—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

### –†–µ—à–µ–Ω–∏–µ
**–ì–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ React –¥–ª—è UI —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –¥–∞–Ω–Ω—ã—Ö —Å Vanilla JavaScript –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏.

### –ü—Ä–∏–Ω—Ü–∏–ø—ã
- **React**: –£–ø—Ä–∞–≤–ª—è–µ—Ç UI —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º–∏
- **Vanilla JS**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –ª–æ–≥–∏–∫—É, –ø—Ä—è–º—ã–µ DOM –æ–ø–µ—Ä–∞—Ü–∏–∏, —Å–æ–±—ã—Ç–∏—è
- **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ**: –ù–∏–∫–∞–∫–æ–≥–æ —Å–º–µ—à–∏–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π

---

## üîß –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. GameEngine (Vanilla JavaScript)
```javascript
// src/game/GameEngine.js
export class GameEngine {
  constructor(canvasElement, callbacks) {
    this.canvas = canvasElement
    this.components = new Map()
    this.setupEvents()
  }
  
  // –ü—Ä—è–º—ã–µ DOM –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  updateDrag(x, y) {
    this.draggedComponent.element.style.transform = 
      `translate3d(${deltaX}px, ${deltaY}px, 0)` // 60fps
  }
}
```

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (drag-n-drop, selection)
- ‚úÖ –ü—Ä—è–º—ã–µ DOM –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏
- ‚úÖ Event handling (touch, mouse)
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (add, move, rotate)
- ‚úÖ GPU –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 2. useGameEngine Hook (React Bridge)
```javascript
// src/hooks/useGameEngine.js
export const useGameEngine = (level) => {
  const gameEngineRef = useRef(null)
  const [gameState, setGameState] = useState(...)
  
  const initializeGameEngine = (canvasElement) => {
    gameEngineRef.current = new GameEngine(canvasElement, {
      onScoreChange: (score) => setGameState(prev => ({...prev, score}))
    })
  }
  
  return { gameState, initializeGameEngine, actions }
}
```

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ú–æ—Å—Ç –º–µ–∂–¥—É React –∏ GameEngine
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è UI
- ‚úÖ Lifecycle —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GameEngine
- ‚úÖ Callback —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### 3. GameScreen (UI Shell)
```tsx
// src/components/game/GameScreen/index.tsx
export const GameScreen = ({ level }) => {
  const { gameState, initializeGameEngine } = useGameEngine(level)
  
  // Callback ref - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è GameEngine
  const canvasRef = useCallback((element) => {
    if (element) initializeGameEngine(element)
  }, [initializeGameEngine])
  
  return (
    <Box>
      <TopGameBar {...gameState} />
      <div ref={canvasRef} /> {/* GameEngine canvas */}
      <ComponentPalette {...gameState} />
    </Box>
  )
}
```

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ layout
- ‚úÖ –°—Ç–∞—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–º–µ–Ω—é, –ø–∞–Ω–µ–ª–∏)
- ‚úÖ Canvas –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ callback ref
- ‚ùå –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É

---

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                React Layer                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ GameScreen  ‚îÇ    ‚îÇ   useGameEngine     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ (UI Shell)  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§   (State Bridge)    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ    ‚îÇ                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Layout    ‚îÇ    ‚îÇ - React State       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Canvas    ‚îÇ    ‚îÇ - GameEngine ref    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - UI comp.  ‚îÇ    ‚îÇ - Callbacks         ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ         ‚îÇ                      ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ callback ref         ‚îÇ initializeGameEngine
          ‚ñº                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Vanilla JS Layer               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ            GameEngine                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Direct DOM operations (60fps)         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Event handling (touch/mouse)          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Component management                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - GPU optimizations (translate3d)       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Drag-n-drop logic                    ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                      ‚îÇ                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ callbacks
                       ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ React State ‚îÇ
                 ‚îÇ Updates     ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: React ‚Üí Callback Ref ‚Üí GameEngine –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
2. **User Interaction**: DOM Events ‚Üí GameEngine ‚Üí Direct DOM manipulation
3. **State Sync**: GameEngine ‚Üí Callbacks ‚Üí React State ‚Üí UI Update
4. **Data Changes**: React Props ‚Üí useGameEngine ‚Üí GameEngine methods

---

## üéØ –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. Callback Ref –ø–∞—Ç—Ç–µ—Ä–Ω
```tsx
// ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º useEffect - race condition
useEffect(() => {
  if (canvasRef.current) initGameEngine(canvasRef.current)
}, [])

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º callback ref - –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å DOM
const canvasRef = useCallback((element) => {
  if (element) initGameEngine(element)
}, [])
```

**–ü–æ—á–µ–º—É callback ref?**
- ‚úÖ –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ—á–Ω–æ –∫–æ–≥–¥–∞ DOM —ç–ª–µ–º–µ–Ω—Ç –≥–æ—Ç–æ–≤
- ‚úÖ –ù–µ—Ç race conditions —Å useEffect
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è cleanup –ø—Ä–∏ unmount

### 2. –ü—Ä—è–º—ã–µ DOM –æ–ø–µ—Ä–∞—Ü–∏–∏
```javascript
// ‚úÖ 60fps –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
updateDrag(x, y) {
  this.element.style.transform = `translate3d(${x}px, ${y}px, 0)`
  this.element.style.willChange = 'transform'
}

// ‚ùå –ù–ï —á–µ—Ä–µ–∑ React state - –º–µ–¥–ª–µ–Ω–Ω–æ
setPosition({x, y}) // –í—ã–∑–æ–≤–µ—Ç re-render
```

### 3. Event handling —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
```javascript
// ‚úÖ –ù–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
canvas.addEventListener('touchmove', handler, { passive: false })

// ‚ùå –ù–ï React —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏  
<div onTouchMove={handler} /> // –ú–µ–¥–ª–µ–Ω–Ω–µ–µ + –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
```

### 4. –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```javascript
// GameEngine ‚Üí React (—á–µ—Ä–µ–∑ callbacks)
onComponentPlace: (id, position) => {
  setGameState(prev => ({
    ...prev,
    placedComponents: prev.placedComponents.map(comp =>
      comp.id === id ? {...comp, position} : comp
    )
  }))
}

// React ‚Üí GameEngine (—á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã)
const addComponent = (type) => {
  gameEngine.addComponent({id, type, position})
}
```

---

## üìö Best Practices

### ‚úÖ DO - –ß—Ç–æ –¥–µ–ª–∞—Ç—å

**React –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ layout
- –§–æ—Ä–º—ã, –º–µ–Ω—é, —Å—Ç–∞—Ç–∏—á–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã  
- –î–∞–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (scores, levels, user preferences)
- Routing –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- API calls –∏ data fetching

**GameEngine –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (drag, selection, animation)
- –ü—Ä—è–º—ã–µ DOM –æ–ø–µ—Ä–∞—Ü–∏–∏ 
- Event handling –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –§–∏–∑–∏–∫–∞, –∫–æ–ª–ª–∏–∑–∏–∏, game logic

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ callback ref –¥–ª—è DOM –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ GameEngine –ø–æ—Å–ª–µ React mount
- Cleanup GameEngine –≤ useEffect return

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ translate3d –¥–ª—è GPU —É—Å–∫–æ—Ä–µ–Ω–∏—è
- –ö–µ—à–∏—Ä—É–π—Ç–µ getBoundingClientRect —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- willChange –¥–ª—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ü—Ä—è–º—ã–µ DOM –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ React state

### ‚ùå DON'T - –ß–µ–≥–æ –ù–ï –¥–µ–ª–∞—Ç—å

**–°–º–µ—à–∏–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π:**
- ‚ùå –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- ‚ùå DOM –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —á–µ—Ä–µ–∑ React state
- ‚ùå React —Å–æ–±—ã—Ç–∏—è –¥–ª—è high-frequency –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚ùå useState –¥–ª—è –ø–æ–∑–∏—Ü–∏–π drag —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**Performance anti-patterns:**
- ‚ùå setState –≤–æ –≤—Ä–µ–º—è drag –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚ùå Frequent re-renders –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
- ‚ùå CSS –∫–ª–∞—Å—Å—ã –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö styles –¥–ª—è –ø–æ–∑–∏—Ü–∏–π
- ‚ùå useEffect –¥–ª—è DOM –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏:**
- ‚ùå –¢–µ—Å–Ω–∞—è —Å–≤—è–∑—å –º–µ–∂–¥—É GameEngine –∏ React
- ‚ùå –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ DOM –∏–∑ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ cleanup –ª–æ–≥–∏–∫–∏
- ‚ùå Callback hell –≤ —Å–æ–±—ã—Ç–∏–π–Ω–æ–π –ª–æ–≥–∏–∫–µ

---

## ‚öñÔ∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ Trade-offs

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –µ—Å–ª–∏:**
- –ù—É–∂–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 60fps –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –°–ª–æ–∂–Ω–∞—è drag-n-drop –ª–æ–≥–∏–∫–∞
- Real-time –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã
- Canvas –∏–ª–∏ WebGL –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ò–≥—Ä—ã, —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã

### –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

‚ùå **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –µ—Å–ª–∏:**
- –ü—Ä–æ—Å—Ç—ã–µ —Ñ–æ—Ä–º—ã –∏ —Å—Ç–∞—Ç–∏—á–Ω—ã–π UI
- –†–µ–¥–∫–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- Team –Ω–µ –∑–Ω–∞–∫–æ–º–∞ —Å Vanilla JS
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –≤–∞–∂–Ω–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ MVP

### Trade-offs

| Aspect | Hybrid Architecture | Pure React |
|--------|-------------------|-----------|
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ 60fps | ‚ùå 3-15fps |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | ‚ùå –í—ã—Å–æ–∫–∞—è | ‚úÖ –ù–∏–∑–∫–∞—è |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚úÖ –•–æ—Ä–æ—à–∞—è | ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —Ä–æ—Å—Ç–µ |
| **Team –∑–Ω–∞–Ω–∏—è** | ‚ùå Vanilla JS –Ω—É–∂–µ–Ω | ‚úÖ –¢–æ–ª—å–∫–æ React |
| **Debugging** | ‚ùå –î–≤–∞ —Å–ª–æ—è | ‚úÖ –û–¥–∏–Ω —Å–ª–æ–π |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚ùå –°–ª–æ–∂–Ω–µ–µ | ‚úÖ –ü—Ä–æ—â–µ |

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

1. **–í GameEngine** –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–∏–ø:
```javascript
// GameEngine.js
createComponentElement(componentData) {
  switch(componentData.type) {
    case 'new_component':
      return this.createNewComponentElement(componentData)
  }
}
```

2. **–í useGameEngine** –¥–æ–±–∞–≤–∏—Ç—å action:
```javascript
const addNewComponent = (data) => {
  gameEngineRef.current?.addComponent(data)
}
```

3. **–í UI** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ actions:
```tsx
<Button onClick={() => actions.addNewComponent({type: 'new_component'})}>
  Add Component
</Button>
```

### Debugging —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

```javascript
// GameEngine debug —Ä–µ–∂–∏–º
class GameEngine {
  constructor(canvas, options) {
    this.debug = options.debug || false
    if (this.debug) {
      window.gameEngine = this // Global access –¥–ª—è debugging
    }
  }
}

// React debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
const useGameEngine = (level) => {
  useEffect(() => {
    if (process.env.NODE_ENV === 'development') {
      console.log('GameEngine state:', gameEngineRef.current?.getDebugInfo())
    }
  })
}
```

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–∞–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ React —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π. 

**–ö–ª—é—á –∫ —É—Å–ø–µ—Ö—É:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∑–∞–¥–∞—á–∏ - React –¥–ª—è UI —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, Vanilla JS –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 60fps –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–ø—ã—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π –∏–≥—Ä—ã-—Å–∏–º—É–ª—è—Ç–æ—Ä–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —Å—Ö–µ–º.*